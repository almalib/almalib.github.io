{"version":3,"sources":["./node_modules/s-chat/dist/esm/cnt-module-chat.entry.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6G;AACpB;AACqE;;AAE9J,2DAA2D,wCAAwC,gCAAgC,mBAAmB,YAAY,gBAAgB,2BAA2B,sBAAsB,mCAAmC,2BAA2B,sCAAsC,2BAA2B,2GAA2G,2BAA2B,wGAAwG,gCAAgC,wFAAwF,aAAa,cAAc,0BAA0B,iCAAiC,kBAAkB,iCAAiC,YAAY,aAAa,2GAA2G,4BAA4B,kCAAkC,oBAAoB,aAAa,sBAAsB,mBAAmB,kBAAkB,yBAAyB,0BAA0B,sBAAsB,eAAe,OAAO,SAAS,YAAY,4BAA4B,eAAe,YAAY,gBAAgB,YAAY,eAAe,mBAAmB,eAAe,yBAAyB,oBAAoB,aAAa,eAAe,mBAAmB,qBAAqB,6BAA6B,UAAU,YAAY,qDAAqD,WAAW,YAAY,kBAAkB,sBAAsB,YAAY,8BAA8B,oBAAoB,aAAa,sBAAsB,8BAA8B,UAAU,uDAAuD,gBAAgB,eAAe,uCAAuC,UAAU,6CAA6C,iDAAiD,0BAA0B,kBAAkB,6CAA6C,2BAA2B,mBAAmB,oCAAoC,iDAAiD,6DAA6D,oCAAoC,0BAA0B,kCAAkC,OAAO,SAAS,gBAAgB,iCAAiC,YAAY,sCAAsC,YAAY,0BAA0B,YAAY,mCAAmC,2BAA2B,0BAA0B,iCAAiC,gBAAgB,kBAAkB,0BAA0B,iBAAiB,6BAA6B,WAAW,0BAA0B,iCAAiC,gBAAgB,qDAAqD,UAAU,iCAAiC,eAAe,0BAA0B,iBAAiB,sCAAsC,gBAAgB;;AAEphG;AACA;AACA,QAAQ,4DAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,4DAAC,iCAAiC,2bAA2b;AACzf;AACA;AACA;AACA;AACA;AACA,oBAAoB,4DAAC,qBAAqB,+hBAA+hB;AACzkB;AACA,4BAA4B,4DAAC;AAC7B,0CAA0C;AAC1C;AACA,qBAAqB;AACrB;AACA,4BAA4B,4DAAC,oBAAoB,gLAAgL;AACjO;AACA,4BAA4B,4DAAC,mBAAmB;AAChD,4CAA4C,gCAAgC,SAAS;AACrF,sFAAsF;AACtF;AACA,4BAA4B,4DAAC,kBAAkB,sJAAsJ;AACrM;AACA;AACA,4BAA4B,4DAAW;AACvC,4BAA4B,4DAAW;AACvC,6BAA6B,4DAAW;AACxC,+BAA+B,4DAAW;AAC1C,+BAA+B,4DAAW;AAC1C,6BAA6B,4DAAW;AACxC,mCAAmC,4DAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,qBAAqB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4DAAC,CAAC,oDAAI,GAAG,SAAS,8CAA8C,EAAE,EAAE,4DAAC,SAAS,yBAAyB,oBAAoB,4DAAC,SAAS,wBAAwB,EAAE,4DAAC,mBAAmB,2IAA2I,GAAG,4DAAC,SAAS,0BAA0B,kDAAkD,4DAAC,iBAAiB,+GAA+G;AACxiB;AACA;AACA;AACA;AACA;AACA,QAAQ,oDAAqB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,4DAA0B;AACrE;AACA,4BAA4B,4DAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,4DAA0B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,oDAAkB;AAC3D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA,QAAQ,oDAAiB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ,4DAAU,OAAO;AACvC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAE4C","file":"stencil-cnt-module-chat-entry-js-es2015.js","sourcesContent":["import { r as registerInstance, h, c as createEvent, H as Host, g as getElement } from './index-063f1606.js';\nimport { C as ChatDictionaryService, a as ChatMessagesLogic } from './utils-f6ec1f87.js';\nimport { e as ChatViewToShowEnum, g as filterDialogsBySearchValue, h as filterDialogsByCategory, i as filterMessageBySearchValue } from './index-582bc2f2.js';\n\nconst cntModuleChatCss = \".wrapper-chat.sc-cnt-module-chat{-webkit-box-shadow:0 0 10px 1px #828282;box-shadow:0 0 10px 1px #828282;border-radius:10px;width:400px;overflow:hidden;height:calc(100vh - 130px);background-color:#fff}.m-chat-wrapper.sc-cnt-module-chat{height:calc(100vh - 170px)}.drop-file-wrapper.sc-cnt-module-chat{height:calc(100vh - 177px)}.content-chat.sc-cnt-module-chat .personal-wrapper.sc-cnt-module-chat .personal-message.sc-cnt-module-chat{height:calc(100vh - 370px)}.content-chat.sc-cnt-module-chat .personal-footer.sc-cnt-module-chat .footer-wrapper.sc-cnt-module-chat{border-radius:10px 10px 5px 5px}.content-chat.sc-cnt-module-chat .profile.sc-cnt-module-chat .mobile.sc-cnt-module-chat{height:100vh;overflow:auto}@media (max-width: 414px){.wrapper-chat.sc-cnt-module-chat{border-radius:0px}.wrapper-chat.sc-cnt-module-chat{width:414px;height:100vh}.content-chat.sc-cnt-module-chat .personal-wrapper.sc-cnt-module-chat .personal-message.sc-cnt-module-chat{height:calc(100vh - 215px)}}.wrapper-modal.sc-cnt-module-chat{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-direction:column;flex-direction:column;position:fixed;top:2%;right:2%;z-index:999}.message.sc-cnt-module-chat{font-size:14px;height:21px;overflow:hidden;width:260px;margin-top:5px;white-space:nowrap;cursor:pointer}.user.sc-cnt-module-chat{display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-align:end;align-items:flex-end}.user-img.sc-cnt-module-chat{width:20%;margin:auto}.user-img.sc-cnt-module-chat .img.sc-cnt-module-chat{width:43px;height:43px;border-radius:50%;background-size:cover;margin:auto}.user-info.sc-cnt-module-chat{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;width:90%}.user-info.sc-cnt-module-chat .name.sc-cnt-module-chat{font-weight:500;font-size:13px}.sc-cnt-module-chat::-webkit-scrollbar{width:5px}.sc-cnt-module-chat::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0.3);-webkit-border-radius:5px;border-radius:3px}.sc-cnt-module-chat::-webkit-scrollbar-thumb{-webkit-border-radius:10px;border-radius:10px;background:rgba(108, 108, 108, 0.8);-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0.5)}.sc-cnt-module-chat::-webkit-scrollbar-thumb:window-inactive{background:rgba(106, 106, 106, 0.4)}@media (max-width: 414px){.wrapper-modal.sc-cnt-module-chat{top:0%;right:0%;max-width:414px}.wrapper-chat.sc-cnt-module-chat{width:414px}.personal-messages.sc-cnt-module-chat{height:80vh}.users.sc-cnt-module-chat{height:80vh}.m-chat-wrapper.sc-cnt-module-chat{height:calc(100vh - 40px)}}@media (max-width: 375px){.wrapper-chat.sc-cnt-module-chat{max-width:375px;padding-right:0px}.users.sc-cnt-module-chat{padding:0px 10px}.new-mess.sc-cnt-module-chat{right:12%}}@media (max-width: 320px){.wrapper-chat.sc-cnt-module-chat{max-width:320px}.chat-header.sc-cnt-module-chat a.sc-cnt-module-chat{right:25%}.message-date.sc-cnt-module-chat{font-size:11px}.users.sc-cnt-module-chat{padding:0px 25px}.personal-messages.sc-cnt-module-chat{padding:0 10px}}\";\n\nconst CntModuleChat = class {\r\n    constructor(hostRef) {\r\n        registerInstance(this, hostRef);\r\n        // /**\r\n        //  * Заголовок для чата\r\n        //  * */\r\n        // @Prop() titleModule: TitleModuleInterface;\r\n        /**\r\n         * добавляем печатающий\r\n         * */\r\n        this.writing = [];\r\n        /**\r\n         * видимость\r\n         * */\r\n        this.visibleState = true;\r\n        /**\r\n         * select content default\r\n         * */\r\n        this.chatViewState = ChatViewToShowEnum.dialogs;\r\n        //============================================================================================\r\n        /**\r\n         * Возможность записи аудио\r\n         */\r\n        this.canRecordAudio = false;\r\n        /**\r\n         * массив данных для контактов\r\n         * */\r\n        this.contactsState = this.contacts;\r\n        /**\r\n         * массив данных категорий\r\n         * */\r\n        this.categoriesState = this.categories;\r\n        /**\r\n         * массив данных диалогов\r\n         * */\r\n        this.dialogsState = this.dialogs;\r\n        /**\r\n         * массив данных персонального чата\r\n         * */\r\n        this.messageState = this.message;\r\n        /**\r\n         * Select show content\r\n         * */\r\n        this.ShowContent = (content) => {\r\n            // console.log(\"ShowContent\", content);\r\n            switch (content) {\r\n                case \"dialogs\":\r\n                    return (h(\"s-saqhan-chat-users-wrapper\", { dialogs: this.dialogsState, categories: this.categoriesState, onClickToCategory: (item) => this.safeFiltersDialog(this.lastSearchDialog, item.detail, this.dialogs), onClickToDialog: (item) => this.clickToDialogHandler(item.detail), onClickToFilesBtn: () => this.clickToFilesBtnHandler(), onSearchDialog: (item) => this.safeFiltersDialog(item.detail, this.lastClickedCategory, this.dialogs), onSendNewMessModal: () => this.sendNewMessModal() }));\r\n                case \"personal\":\r\n                    return (\r\n                    // <div class='drop-file-wrapper' >\r\n                    //   <s-adam-copying></s-adam-copying>\r\n                    // </div>\r\n                    h(\"module-personal\", { chatPresenceState: this.chatPresenceState, openedDialog: this.openedDialog, chatActionState: this.chatActionState, writing: this.writing, canRecordAudio: this.canRecordAudio, onSendTextMessage: () => this.scrollMessageViewToBot(), dialogs: this.dialogsState, message: this.messageState, onSearchPersonalMessages: (e) => this.searchPersonalMessages(e.detail), onClickToShowDialogs: () => this.clickToShowDialogsHandler(), onClickToUserProfile: () => this.clickToUserProfileHandler(), onCancelSearchPersonal: () => this.cancelSearchPersonal() }));\r\n                case \"files\":\r\n                    return (h(\"s-saqhan-chat-files-wrapper\", {\r\n                        // onClickToLink={(item) => this.clickToLink(item.detail)}\r\n                        onClickToShowDialogs: () => this.clickToShowDialogsHandler()\r\n                    }));\r\n                case \"profile\":\r\n                    return (h(\"s-adam-profile\", { theme: \"module\", categories: this.categoriesState, onClickToShowDialogs: () => this.clickToShowDialogsHandler(), onClickToShowFolders: () => this.clickToShowFoldersHandler() }));\r\n                case \"contacts\":\r\n                    return (h(\"contacts-list\", { theme: \"module\", contacts: this.contacts,\r\n                        // onSearchContact={(detail) => this.searchContact({ detail })}\r\n                        onClickToShowDialogs: () => this.clickToShowDialogsHandler() }));\r\n                case \"folders\":\r\n                    return (h(\"user-folders\", { onCreateFolder: (e) => this.createFolderHandler(e.detail), dialogs: this.dialogsState, onClickToUserProfile: () => this.clickToUserProfileHandler() }));\r\n            }\r\n        };\r\n        this.showFullChat = createEvent(this, \"showFullChat\", 7);\r\n        this.createFolder = createEvent(this, \"createFolder\", 7);\r\n        this.clickToDialog = createEvent(this, \"clickToDialog\", 7);\r\n        this.sendTextMessage = createEvent(this, \"sendTextMessage\", 7);\r\n        this.clickToFilesBtn = createEvent(this, \"clickToFilesBtn\", 7);\r\n        this.searchContact = createEvent(this, \"searchContact\", 7);\r\n        this.chatViewStateChange = createEvent(this, \"chatViewStateChange\", 7);\r\n    }\r\n    /**\r\n     * позволяет установить печатающие данные\r\n     * */\r\n    async setWritingState(item) {\r\n        this.writing = item ? [item] : null;\r\n    }\r\n    /**\r\n     * меняет статус (присутстия собеседников или контакта) в чате\r\n     * */\r\n    async updateChatPresenceState(item) {\r\n        this.chatPresenceState = item;\r\n    }\r\n    /**\r\n     * меняет статусы действия текущих (печатает, записывает и т.д.)\r\n     * */\r\n    async updateChatActionState(item) {\r\n        this.chatActionState = item;\r\n    }\r\n    /**\r\n     * скрывает весь блок что бы на экране не было вообще видно\r\n     * */\r\n    async hide() {\r\n        this.visibleState = false;\r\n    }\r\n    /**\r\n     * позволяет активировать/деактивароть возможность записи аудио\r\n     * */\r\n    async activeRecordAudioState(state) {\r\n        this.canRecordAudio = state;\r\n    }\r\n    /**\r\n     * позволяет активировать/деактивароть возможность октрытие приложение\r\n     * */\r\n    async activeShowFullChat(state) {\r\n        this.disableShowFullChatState = !state;\r\n    }\r\n    /**\r\n     * сменить окно показа\r\n     * */\r\n    async changeViewToShow(state) {\r\n        this.chatViewState = state;\r\n    }\r\n    /**\r\n     * скролит вниз окно сообщений\r\n     * */\r\n    async safeScrollToBotMessageView() {\r\n        this.scrollMessageViewToBot();\r\n    }\r\n    /**\r\n     * показывает весь блок после скрытия\r\n     * */\r\n    async show() {\r\n        // show a prompt\r\n        this.visibleState = true;\r\n    }\r\n    /**\r\n     * показывает только кнопку\r\n     * */\r\n    async close() {\r\n        this.showChat(false);\r\n    }\r\n    /**\r\n     * открывает блок чатов\r\n     * */\r\n    async open() {\r\n        this.showChat(true);\r\n    }\r\n    /**\r\n     * */\r\n    async openDialog(dialog) {\r\n        this.open();\r\n        this.clickToDialogHandler(dialog, true);\r\n    }\r\n    watchDictionaryHandler(newValue) {\r\n        this.updateDictionary(newValue);\r\n    }\r\n    watchDialogsHandler(newValue) {\r\n        this.safeFiltersDialog(this.lastSearchDialog, this.lastClickedCategory, newValue);\r\n    }\r\n    watchMessageHandler(newValue, oldValue) {\r\n        console.log(\"The new value of activated is: \", { newValue, oldValue });\r\n        this.messageState = this.message;\r\n    }\r\n    watchCategoriesHandler(newValue) {\r\n        this.categoriesState = newValue;\r\n        this.safeFiltersDialog(this.lastSearchDialog, this.lastClickedCategory, this.dialogs);\r\n    }\r\n    componentDidLoad() {\r\n        this.updateDictionary(this.dictionary);\r\n    }\r\n    render() {\r\n        return (h(Host, { style: { display: !this.visibleState ? \"none\" : null } }, h(\"div\", { class: \"wrapper-modal\" }, this.openState ? (h(\"div\", { class: \"wrapper-chat\" }, h(\"module-header\", { disableShowFullChatState: this.disableShowFullChatState, onShowFullChat: () => this.showFullChatHandler(), onClose: () => this.onClose() }), h(\"div\", { class: \"m-chat-wrapper\" }, this.ShowContent(this.chatViewState)))) : (\"\"), h(\"btn-wrapper\", { onClickToShowChat: () => this.showChat(), showChat: this.openState, dialogs: this.countNewMess(this.dialogs) }))));\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    updateDictionary(newValue) {\r\n        ChatDictionaryService.dictionary$.next(newValue);\r\n        // console.log(\"changed - dictionary\");\r\n    }\r\n    countNewMess(array) {\r\n        let counter = 0;\r\n        array.map((item) => {\r\n            counter += item.newMessage;\r\n        });\r\n        return counter;\r\n    }\r\n    /**\r\n     * */\r\n    // public clickToCategory(value: ChatCategoryInterface) {\r\n    //   this.dialogsState = filterDialogsByCategory(value, this.dialogs);\r\n    // }\r\n    /**\r\n     * dialogue search\r\n     * */\r\n    safeFiltersDialog(searchValue, category, allDialogs) {\r\n        this.lastSearchDialog = searchValue;\r\n        this.lastClickedCategory = category;\r\n        let filteredDialogsBySearchValue = allDialogs;\r\n        if (!this.disableInnerSearchDialogsState) {\r\n            filteredDialogsBySearchValue = filterDialogsBySearchValue(searchValue, allDialogs);\r\n        }\r\n        this.dialogsState = filterDialogsByCategory(category, filteredDialogsBySearchValue);\r\n    }\r\n    /**\r\n     * search for private messages\r\n     * */\r\n    searchPersonalMessages(value) {\r\n        if (!this.disableInnerSearchMessagesState) {\r\n            this.messageState = filterMessageBySearchValue(value, this.message);\r\n        }\r\n    }\r\n    createFolderHandler(item) {\r\n        return item;\r\n        // console.log(\"createFolderHandler\", item);\r\n    }\r\n    /**\r\n     * Метод отмена поиска\r\n     * **/\r\n    cancelSearchPersonal() {\r\n        this.messageState = this.message;\r\n    }\r\n    /**\r\n     * Метод для изменения состояния чата\r\n     * */\r\n    showChat(state = !this.openState) {\r\n        this.openState = state;\r\n    }\r\n    /**\r\n     * Метод для закрытия чата\r\n     * */\r\n    onClose() {\r\n        this.openState = false;\r\n    }\r\n    /**\r\n     * click to Link\r\n     * */\r\n    clickToLinkHandler() {\r\n        return this.chatViewState;\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    clickToDialogHandler(dialog, pseudoClick) {\r\n        if (pseudoClick) {\r\n            this.clickToDialog.emit(dialog);\r\n        }\r\n        this.openedDialog = dialog;\r\n        this.updateViewState(ChatViewToShowEnum.personal);\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    clickToFilesBtnHandler() {\r\n        this.updateViewState(ChatViewToShowEnum.files);\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    showFullChatHandler() {\r\n        this.showFullChat.emit({\r\n            view: this.chatViewState,\r\n            data: this.chatViewState === ChatViewToShowEnum.personal\r\n                ? this.openedDialog\r\n                : null,\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    clickToShowDialogsHandler() {\r\n        this.updateViewState(ChatViewToShowEnum.dialogs);\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    clickToUserProfileHandler() {\r\n        this.updateViewState(ChatViewToShowEnum.profile);\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    sendNewMessModal() {\r\n        this.updateViewState(ChatViewToShowEnum.contacts);\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    clickToShowFoldersHandler() {\r\n        this.updateViewState(ChatViewToShowEnum.folders);\r\n    }\r\n    /**\r\n     *\r\n     * */\r\n    scrollMessageViewToBot() {\r\n        ChatMessagesLogic.safeScrollToBot();\r\n    }\r\n    /**\r\n     * */\r\n    updateViewState(state) {\r\n        this.chatViewStateChange.emit((this.chatViewState = state));\r\n    }\r\n    get el() { return getElement(this); }\r\n    static get watchers() { return {\r\n        \"dictionary\": [\"watchDictionaryHandler\"],\r\n        \"dialogs\": [\"watchDialogsHandler\"],\r\n        \"message\": [\"watchMessageHandler\"],\r\n        \"categories\": [\"watchCategoriesHandler\"]\r\n    }; }\r\n};\r\nCntModuleChat.style = cntModuleChatCss;\n\nexport { CntModuleChat as cnt_module_chat };\n"],"sourceRoot":"webpack:///"}