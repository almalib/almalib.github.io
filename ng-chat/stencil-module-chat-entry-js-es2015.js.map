{"version":3,"sources":["./node_modules/s-chat/dist/esm/index-582bc2f2.js","./node_modules/s-chat/dist/esm/module-chat.entry.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4DAA4D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA,CAAC,8DAA8D;AAC/D;AACA;AACA;AACA;AACA,CAAC,sDAAsD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE2W;;;;;;;;;;;;;ACrO3W;AAAA;AAAA;AAAA;AAAA;AAAkG;AACoB;AAC4F;;AAElN;;AAEA;AACA;AACA,QAAQ,4DAAgB;AACxB,wBAAwB,mDAAW;AACnC,uBAAuB,mDAAO;AAC9B,0BAA0B,mDAAc;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mDAAW;AAC3C,+BAA+B,mDAAO;AACtC,kDAAkD,mDAAc,GAAG,mDAAiB,GAAG,mDAAc;AACrG;AACA;AACA;AACA;AACA;AACA,YAAY,4DAAW;AACvB,SAAS;AACT;AACA;AACA,gBAAgB,4DAAC,qBAAqB,yCAAyC,mDAAU,mCAAmC,mDAAQ,iQAAiQ,mDAAyB,mCAAmC,mDAA0B,EAAE;AAC7d;AACA;AACA,wBAAwB,mDAAW,iDAAiD,aAAa,iCAAiC,oDAAwB;AAC1J,iCAAiC,oDAAmB;AACpD,qBAAqB,YAAY,IAAI,gBAAgB;AACrD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4DAAiB;AAC7B;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,gBAAgB,QAAQ,4DAAU,OAAO;AACzC;AACA;;AAEqC","file":"stencil-module-chat-entry-js-es2015.js","sourcesContent":["/**\r\n *\r\n * */\r\nvar ChatMessageDirectionEnum;\r\n(function (ChatMessageDirectionEnum) {\r\n    /**\r\n     * сообщения написал кто то другой, и получено мною\r\n     * */\r\n    ChatMessageDirectionEnum[ChatMessageDirectionEnum[\"toMe\"] = 0] = \"toMe\";\r\n    /**\r\n     * сообщения написал я\r\n     * */\r\n    ChatMessageDirectionEnum[ChatMessageDirectionEnum[\"fromMe\"] = 1] = \"fromMe\";\r\n    /**\r\n     * сообщения которое будет отображаться в центре\r\n     * */\r\n    ChatMessageDirectionEnum[ChatMessageDirectionEnum[\"center\"] = 2] = \"center\";\r\n})(ChatMessageDirectionEnum || (ChatMessageDirectionEnum = {}));\r\n/**\r\n *\r\n * */\r\nvar ChatMessageTypeEnum;\r\n(function (ChatMessageTypeEnum) {\r\n    /**\r\n     * сообщения написал кто то другой, и получено мною\r\n     * */\r\n    ChatMessageTypeEnum[\"text\"] = \"text\";\r\n    /**\r\n     * аудио сообщения записанное самим пользователем\r\n     * */\r\n    ChatMessageTypeEnum[\"liveAudio\"] = \"live-audio\";\r\n    /**\r\n     * аудио сообщение любое которое не записано самим пользователем\r\n     * */\r\n    ChatMessageTypeEnum[\"audio\"] = \"audio\";\r\n    /**\r\n     * фотка сделанная на устройстве пользователя и отправленная сразу\r\n     * */\r\n    ChatMessageTypeEnum[\"liveImage\"] = \"live-image\";\r\n    /**\r\n     * фотка из устройства отправителя\r\n     * */\r\n    ChatMessageTypeEnum[\"image\"] = \"image\";\r\n    /**\r\n     * видео сделанная на устройстве пользователя и отправленная сразу\r\n     * */\r\n    ChatMessageTypeEnum[\"liveVideo\"] = \"live-video\";\r\n    /**\r\n     * видео из устройства отправителя\r\n     * */\r\n    ChatMessageTypeEnum[\"video\"] = \"video\";\r\n    /**\r\n     * файл из устройства отправителя\r\n     * */\r\n    ChatMessageTypeEnum[\"file\"] = \"file\";\r\n    /**\r\n     * timestamp\r\n     * */\r\n    ChatMessageTypeEnum[\"date\"] = \"date\";\r\n    /**\r\n     * Печатает сообщение\r\n     */\r\n    ChatMessageTypeEnum[\"loading\"] = \"loading\";\r\n})(ChatMessageTypeEnum || (ChatMessageTypeEnum = {}));\r\nvar ChatLinkTypeEnum;\r\n(function (ChatLinkTypeEnum) {\r\n    ChatLinkTypeEnum[\"showFile\"] = \"showFile\";\r\n    ChatLinkTypeEnum[\"showDialogs\"] = \"showDialogs\";\r\n    ChatLinkTypeEnum[\"showPersonalDialog\"] = \"showPersonalDialog\";\r\n    ChatLinkTypeEnum[\"userNamePersonal\"] = \"user-name-personal\";\r\n    ChatLinkTypeEnum[\"addDialog\"] = \"\\\"add-dialog\\\"\";\r\n    ChatLinkTypeEnum[\"fromMobileContacts\"] = \"\\\"contacts\\\"\";\r\n    ChatLinkTypeEnum[\"fromMobileMenuBar\"] = \"menu-bar\";\r\n})(ChatLinkTypeEnum || (ChatLinkTypeEnum = {}));\r\n/**\r\n *\r\n * */\r\nfunction chatConvertWritingStatusToMessage(writing) {\r\n    return {\r\n        /**\r\n         * содержимое сообщения\r\n         * */\r\n        content: null,\r\n        /**\r\n         * тип сообщения\r\n         * */\r\n        type: ChatMessageTypeEnum.loading,\r\n        /** время создание */\r\n        time: {\r\n            /** время создания */\r\n            created: Date.now(),\r\n        },\r\n        /**\r\n         * направления сообщения\r\n         * */\r\n        direction: ChatMessageDirectionEnum.toMe,\r\n        /**\r\n         * отправитель\r\n         * */\r\n        sender: {\r\n            uid: writing.uid,\r\n            icon: writing.icon,\r\n            name: writing.name,\r\n            phone: writing.phone,\r\n        },\r\n    };\r\n}\r\n// /**\r\n//  * dialogue search\r\n//  * */\r\n//  export function ChatSearchDialog(value: string) {\r\n//   if (!this.disableInnerSearchDialogs) {\r\n//     this.dialogsState = filterDialogsBySearchValue(\r\n//       value,\r\n//       this.dialogs\r\n//     );\r\n//   }\r\n// }\r\n// /**\r\n//  * search for private messages\r\n//  * */\r\n//  export function ChatSearchPersonalMessages(value: string ) {\r\n//   if (!this.disableInnerSearchMessages) {\r\n//     this.messageState = filterMessageBySearchValue(\r\n//       value,\r\n//       this.message\r\n//     )\r\n//   }\r\n// }\r\n/**\r\n * создание текстового сообщения\r\n * */\r\nfunction createTextMessage(text, sender, options) {\r\n    return createMessage(ChatMessageTypeEnum.text, text, sender, options);\r\n}\r\n/**\r\n * создание сообщения\r\n * */\r\nfunction createMessage(type, content, sender, options) {\r\n    var _a, _b, _c, _d, _e, _f, _g;\r\n    return {\r\n        content: content,\r\n        sender: sender,\r\n        type: type,\r\n        direction: (_a = options === null || options === void 0 ? void 0 : options.direction) !== null && _a !== void 0 ? _a : ChatMessageDirectionEnum.fromMe,\r\n        time: {\r\n            created: (_c = (_b = options === null || options === void 0 ? void 0 : options.time) === null || _b === void 0 ? void 0 : _b.created) !== null && _c !== void 0 ? _c : new Date(),\r\n            delivery: (_e = (_d = options === null || options === void 0 ? void 0 : options.time) === null || _d === void 0 ? void 0 : _d.created) !== null && _e !== void 0 ? _e : null,\r\n            read: (_g = (_f = options === null || options === void 0 ? void 0 : options.time) === null || _f === void 0 ? void 0 : _f.created) !== null && _g !== void 0 ? _g : null\r\n        },\r\n    };\r\n}\r\n/**\r\n * filter message by search value\r\n * */\r\nfunction filterMessageBySearchValue(value, message) {\r\n    return value\r\n        ? message.filter((item) => {\r\n            return typeof item.content === \"string\"\r\n                ? item.content.toLowerCase().includes(value.toLowerCase())\r\n                : false;\r\n        })\r\n        : message;\r\n}\r\n/**\r\n * filter dialogs by search value\r\n * */\r\nfunction filterDialogsBySearchValue(value, dialogs) {\r\n    return value\r\n        ? dialogs.filter((item) => {\r\n            return typeof item.name === \"string\"\r\n                ? item.name.toLowerCase().includes(value.toLowerCase())\r\n                : false;\r\n        })\r\n        : dialogs;\r\n}\r\n/**\r\n * filter contact by search value\r\n * */\r\nfunction filterContactBySearchValue(value, contacts) {\r\n    return value\r\n        ? contacts.filter((item) => {\r\n            return typeof item.name === \"string\"\r\n                ? item.name.toLowerCase().includes(value.toLowerCase())\r\n                : false;\r\n        })\r\n        : contacts;\r\n}\r\n/**\r\n * filter dialogs by category id\r\n * */\r\nfunction filterDialogsByCategory(category, dialogs) {\r\n    return (category && category.id !== \"all\")\r\n        ? dialogs.filter((dialog) => dialog.category === category.id)\r\n        : dialogs;\r\n}\r\nvar ChatViewToShowEnum;\r\n(function (ChatViewToShowEnum) {\r\n    ChatViewToShowEnum[\"files\"] = \"files\";\r\n    ChatViewToShowEnum[\"dialogs\"] = \"dialogs\";\r\n    ChatViewToShowEnum[\"personal\"] = \"personal\";\r\n    ChatViewToShowEnum[\"profile\"] = \"profile\";\r\n    ChatViewToShowEnum[\"users\"] = \"users\";\r\n    ChatViewToShowEnum[\"contacts\"] = \"contacts\";\r\n    ChatViewToShowEnum[\"folders\"] = \"folders\";\r\n})(ChatViewToShowEnum || (ChatViewToShowEnum = {}));\r\nvar ChatUserActionStatusState;\r\n(function (ChatUserActionStatusState) {\r\n    ChatUserActionStatusState[\"writing\"] = \"writing\";\r\n    ChatUserActionStatusState[\"audioRecording\"] = \"audio-recording\";\r\n})(ChatUserActionStatusState || (ChatUserActionStatusState = {}));\r\nvar ChatUserPresenceState;\r\n(function (ChatUserPresenceState) {\r\n    ChatUserPresenceState[ChatUserPresenceState[\"offline\"] = 0] = \"offline\";\r\n    ChatUserPresenceState[ChatUserPresenceState[\"online\"] = 1] = \"online\";\r\n})(ChatUserPresenceState || (ChatUserPresenceState = {}));\r\nfunction scrollToBot(scrollContainer, options) {\r\n    var _a;\r\n    const timer = (_a = options === null || options === void 0 ? void 0 : options.timer) !== null && _a !== void 0 ? _a : 100, y = options === null || options === void 0 ? void 0 : options.y, cb = () => {\r\n        scrollContainer.scrollBy(0, y !== null && y !== void 0 ? y : scrollContainer.scrollHeight);\r\n    };\r\n    if (timer) {\r\n        setTimeout(cb, timer);\r\n    }\r\n    else {\r\n        cb();\r\n    }\r\n}\n\nexport { ChatMessageDirectionEnum as C, ChatMessageTypeEnum as a, ChatUserPresenceState as b, ChatUserActionStatusState as c, createTextMessage as d, ChatViewToShowEnum as e, filterContactBySearchValue as f, filterDialogsBySearchValue as g, filterDialogsByCategory as h, filterMessageBySearchValue as i, chatConvertWritingStatusToMessage as j, scrollToBot as s };\n","import { r as registerInstance, f as forceUpdate, h, g as getElement } from './index-063f1606.js';\nimport { C as ChatMessageDirectionEnum, a as ChatMessageTypeEnum, d as createTextMessage } from './index-582bc2f2.js';\nimport { M as MessageMock, d as dialogs, D as DictionaryMock, b as DictionaryMockEng, c as categories, a as contacts, e as disableInnerSearchDialogs, f as disableInnerSearchMessages } from './mock-5b093f4b.js';\n\nconst moduleChatCss = \"\";\n\nconst ModuleChat = class {\r\n    constructor(hostRef) {\r\n        registerInstance(this, hostRef);\r\n        this.messages = MessageMock;\r\n        this.dialogs = dialogs;\r\n        this.dictionary = DictionaryMock;\r\n    }\r\n    componentDidLoad() {\r\n        window['ref'] = this.ref;\r\n        setInterval(() => {\r\n            // console.log(\r\n            //   'messages setInterval',\r\n            //\r\n            // );\r\n            this.messages = [...MessageMock];\r\n            this.dialogs = [...dialogs];\r\n            this.dictionary = this.dictionary === DictionaryMock ? DictionaryMockEng : DictionaryMock;\r\n            // console.log(\r\n            //   'updated dictionary',\r\n            //   this.dictionary\r\n            // );\r\n            // @ts-ignore\r\n            forceUpdate(this.ref2);\r\n        }, 10000);\r\n    }\r\n    render() {\r\n        return (h(\"cnt-module-chat\", { ref: (el) => this.ref = el, categories: categories, dialogs: this.dialogs, contacts: contacts, dictionary: this.dictionary, message: this.messages, onClickToDialog: (ev) => this.clickToDialog(ev.detail), onSendTextMessage: (ev) => this.sendTextMessage(ev.detail), onShowFullChat: (ev) => this.showFullChat(ev.detail), disableInnerSearchDialogsState: disableInnerSearchDialogs, disableInnerSearchMessagesState: disableInnerSearchMessages }));\r\n    }\r\n    clickToDialog(dialog) {\r\n        this.messages = MessageMock.map((message) => (Object.assign(Object.assign({}, message), { content: (message.direction !== ChatMessageDirectionEnum.center &&\r\n                message.type === ChatMessageTypeEnum.text)\r\n                ? `${dialog.name}> ${message.content}`\r\n                : message.content })));\r\n        // console.log(\r\n        //   'clickToDialog [12]',\r\n        //   dialog\r\n        // );\r\n    }\r\n    showFullChat(ev) {\r\n        return ev;\r\n        // console.log(\r\n        //   'showFullChat',\r\n        //   ev\r\n        // )\r\n    }\r\n    sendTextMessage(message) {\r\n        // console.log(\r\n        //   'sendTextMessage [2]',\r\n        //   message\r\n        // );\r\n        this.messages = [\r\n            ...this.messages,\r\n            createTextMessage(message, {\r\n                uid: \"test-id-2\",\r\n                icon: \"https://via.placeholder.com/60x60?text=User\",\r\n                name: \"Адам\",\r\n                phone: \"79291234567\",\r\n            })\r\n        ];\r\n    }\r\n    get ref2() { return getElement(this); }\r\n};\r\nModuleChat.style = moduleChatCss;\n\nexport { ModuleChat as module_chat };\n"],"sourceRoot":"webpack:///"}